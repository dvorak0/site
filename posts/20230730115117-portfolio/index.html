<!doctype html><html lang=zh-cn><head><meta charset=UTF-8><meta name=description content="self-reflections of Zhenfei Yang"><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=X-UA-Compatible content="IE=edge"><style type=text/css>body{font-family:monospace}</style><title>portfolio</title>
<link rel=stylesheet href=../../css/style.css></head><body><header><script defer src=https://worker.yangzhenfei.com/a.js></script><script defer>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-JHXS14NDHV")</script>========================<br>== <a href=https://www.yangzhenfei.com/>Seeking Complexity</a> ==<br>========================<div style=float:right></div><br><p><nav><a href=../../><b>Start</b></a>.
<a href=../../posts/><b>Posts</b></a>.
<a href=../../tags/><b>Tags</b></a>.
<a href=../../about/><b>About</b></a>.</nav></p></header><main><article><h1>portfolio</h1><b><time>2023-07-30 11:51:00</time></b>
<a href=../../tags/public>PUBLIC</a><div><p>如果想要理解投资，应该从哪里开始？</p><p>关于投资的论断经常和一些似是而非的词关联在一起：“认知”，“心性”，“信仰”。</p><p>如果在某个瞬间觉得这种描述过于主观，有没有solid一些的理论可以用？</p><p>我意识到写这一篇内容的目的，是最符合我做这个site的初心的。</p><p>那就是，如果你也关心这个内容，请务必<a href>let&rsquo;s_have_a_talk</a>。</p><h2 id=我们的loss-function是什么>我们的loss function是什么</h2><p>我们要通过portfolio获得什么。</p><ul><li><p>最大收益？</p><p>可能是，如果两个组合收益相同，但是波动一个大一个小呢？</p></li><li><p>最小波动？</p><p>可能是，如果你是养老基金，可能需要一个最小波动的组合，并惊讶地发现，这个最小波动的组合甚至可以从市场中性中获益。</p></li><li><p>收益/波动？</p><p>可能是，简单地定一个函数<a href=https://en.wikipedia.org/wiki/Sharpe_ratio>Sharpe Ratio</a>：收益/波动。但是为什么不是收益/两倍波动？</p></li><li><p>给定波动，最大化收益？</p><p>可能是，类似于银行给大家做过的投资者资格测试，你能承担的最大损失是多少。潜台词就是可接受的最大损失，决定了portfolio，进而决定了最大收益。</p></li></ul><h2 id=portfolio-101>portfolio 101</h2><p>一切从如下直觉开始。</p><p>我们知道如果 \(A\) 是\(N(u, \sigma^2)\)，\(B\) 也是\(N(u, \sigma^2)\)，（并且可耻地假设 \(cov(A,B) = 0\) ）。</p><p>那么 \(\frac{1}{2}A+\frac{1}{2}B\) （对应各买一半）则是 \(N\left((u+u)/2, (\frac{\sigma}{2})^2+(\frac{\sigma}{2})^2\right) = N\left(u, \frac{1}{2}\sigma^2\right)\)，收益 \(u\) 不变，风险从 \(\sigma\) 变成了 \(\frac{1}{\sqrt{2}}\sigma\)。</p><p>更进一步地。</p><p>如果A,B不是i.i.d.，但是我们知道 \(cov(A,B) = \Sigma\) ，我们是不是可以获得一个连续的变换，获得不同的portfolio，也就是不同的（收益，波动）表现的组合。</p><p>这种方法就是所谓的<a href=https://en.wikipedia.org/wiki/Portfolio_optimization>Portfolio Optimization</a>。</p><figure><img src=../../ox-hugo/2023-07-30_13-54-42_screenshot_hu8778538642472992757.webp height=850 width=1280></figure><p>每个蓝色的点代表单个资产，横轴纵轴分别表示波动(returns)和收益(volatility)。</p><p>通过组合资产占比，获得大量的采样点，而这些采样点形成了一个等高线(efficient frontier)，等高线右下角的区域是无需考虑的，因为他们要么同等收益，波动更大，要么同等波动，收益更小。</p><p>用这个等高线，我们可以开始选自己的目标了。</p><ul><li>最大收益：选最上面的点（图中PPG，是个资产，也是线上一点）</li><li>最小波动：选最左边的点（图中绿色）</li><li>最大sharp ratio：选等高线和 \(y=x+b\) 的切线（图中红色，斜率为1的线图中未画出）</li></ul><h2 id=一些实验>一些实验</h2><p>格雷厄姆在《聪明的投资者》中介绍了50:50的股债平衡策略。</p><p>哈利·布朗在《永久投资组合》中介绍了25:25:25:25的股票、长债、黄金、短债/现金的策略。</p><p>杰里米·西格尔在《股市长线法宝》中介绍了红利再投资的策略。</p><p>（本来觉得bitcoin应该也加进去的，发现结果太离谱。。。所以先不加了）</p><p>我们选择如下资产（都已经做了分红处理，没有加入短债/现金）：</p><table><thead><tr><th style=text-align:left>symbol</th><th style=text-align:left>描述</th><th style=text-align:left>备注</th></tr></thead><tbody><tr><td style=text-align:left>510300.SS</td><td style=text-align:left>上证300</td><td style=text-align:left>大公司</td></tr><tr><td style=text-align:left>510500.SS</td><td style=text-align:left>中证500</td><td style=text-align:left>小公司</td></tr><tr><td style=text-align:left>510880.SS</td><td style=text-align:left>上证红利</td><td style=text-align:left>高分红</td></tr><tr><td style=text-align:left>511010.SS</td><td style=text-align:left>中国国债</td><td style=text-align:left>长期国债</td></tr><tr><td style=text-align:left>IAU</td><td style=text-align:left>黄金</td><td style=text-align:left>贵金属</td></tr><tr><td style=text-align:left>QQQ</td><td style=text-align:left>纳斯达克100</td><td style=text-align:left>科技公司</td></tr><tr><td style=text-align:left>SPY</td><td style=text-align:left>标普500</td><td style=text-align:left>大公司</td></tr><tr><td style=text-align:left>IVZ</td><td style=text-align:left>美国红利</td><td style=text-align:left>高分红</td></tr><tr><td style=text-align:left>TLH</td><td style=text-align:left>美国国债</td><td style=text-align:left>长期国债</td></tr></tbody></table><p>实验上我们选择2015年至今（2023-07-30）。</p><p>先粗略的看一下：</p><figure><img src=../../ox-hugo/2023-12-20_10-35-57_screenshot_hu14962181910332045129.webp height=800 width=1280></figure><p>怎么说呢。。。还是不说一些主观地分析了。</p><p>再看看相关性：</p><figure><img src=../../ox-hugo/2023-12-20_10-36-48_screenshot_hu12910597073981317060.webp height=1088 width=1280></figure><p>平均年回报率：</p><table><thead><tr><th style=text-align:left>symbol</th><th style=text-align:left>年化收益</th><th style=text-align:left>波动</th></tr></thead><tbody><tr><td style=text-align:left>510300.SS</td><td style=text-align:left>0.026394</td><td style=text-align:left>0.05304536</td></tr><tr><td style=text-align:left>510500.SS</td><td style=text-align:left>0.015033</td><td style=text-align:left>0.07774597</td></tr><tr><td style=text-align:left>510880.SS</td><td style=text-align:left>0.053159</td><td style=text-align:left>0.04489032</td></tr><tr><td style=text-align:left>511010.SS</td><td style=text-align:left>0.029116</td><td style=text-align:left>0.00113315</td></tr><tr><td style=text-align:left>IAU</td><td style=text-align:left>0.055709</td><td style=text-align:left>0.01960496</td></tr><tr><td style=text-align:left>IVZ</td><td style=text-align:left>-0.054441</td><td style=text-align:left>0.14687973</td></tr><tr><td style=text-align:left>QQQ</td><td style=text-align:left>0.169535</td><td style=text-align:left>0.04891489</td></tr><tr><td style=text-align:left>SPY</td><td style=text-align:left>0.114008</td><td style=text-align:left>0.03277668</td></tr><tr><td style=text-align:left>TLH</td><td style=text-align:left>-0.005121</td><td style=text-align:left>0.011523</td></tr></tbody></table><p>接下来开始计算了，portfolio 101第一题：</p><ul><li><p>最小波动组合</p><table><thead><tr><th style=text-align:left>symbol</th><th style=text-align:left>比例</th><th style=text-align:left></th><th style=text-align:left>metrics</th><th style=text-align:left>performance</th></tr></thead><tbody><tr><td style=text-align:left>510300.SS</td><td style=text-align:left>0.01005</td><td style=text-align:left></td><td style=text-align:left>Expected annual return</td><td style=text-align:left>2.9%</td></tr><tr><td style=text-align:left>510500.SS</td><td style=text-align:left>-0.00218</td><td style=text-align:left></td><td style=text-align:left>Annual volatility</td><td style=text-align:left>3.0%</td></tr><tr><td style=text-align:left>510880.SS</td><td style=text-align:left>0.02301</td><td style=text-align:left></td><td style=text-align:left>Sharpe Ratio</td><td style=text-align:left>0.31</td></tr><tr><td style=text-align:left>511010.SS</td><td style=text-align:left>0.92293</td><td style=text-align:left></td><td style=text-align:left></td><td style=text-align:left></td></tr><tr><td style=text-align:left>IAU</td><td style=text-align:left>0.01881</td><td style=text-align:left></td><td style=text-align:left></td><td style=text-align:left></td></tr><tr><td style=text-align:left>IVZ</td><td style=text-align:left>0.00158</td><td style=text-align:left></td><td style=text-align:left></td><td style=text-align:left></td></tr><tr><td style=text-align:left>QQQ</td><td style=text-align:left>-0.02801</td><td style=text-align:left></td><td style=text-align:left></td><td style=text-align:left></td></tr><tr><td style=text-align:left>SPY</td><td style=text-align:left>0.07058</td><td style=text-align:left></td><td style=text-align:left></td><td style=text-align:left></td></tr><tr><td style=text-align:left>TLH</td><td style=text-align:left>0.08332</td><td style=text-align:left></td><td style=text-align:left></td><td style=text-align:left></td></tr></tbody></table></li><li><p>最大sharp ratio</p><table><thead><tr><th style=text-align:left>symbol</th><th style=text-align:left>比例</th><th style=text-align:left></th><th style=text-align:left>metrics</th><th style=text-align:left>performance</th></tr></thead><tbody><tr><td style=text-align:left>510300.SS</td><td style=text-align:left>-0.14312</td><td style=text-align:left></td><td style=text-align:left>Expected annual return</td><td style=text-align:left>15.2%</td></tr><tr><td style=text-align:left>510500.SS</td><td style=text-align:left>-0.08051</td><td style=text-align:left></td><td style=text-align:left>Annual volatility</td><td style=text-align:left>11.4%</td></tr><tr><td style=text-align:left>510880.SS</td><td style=text-align:left>0.25929</td><td style=text-align:left></td><td style=text-align:left>Sharpe Ratio</td><td style=text-align:left>1.15</td></tr><tr><td style=text-align:left>511010.SS</td><td style=text-align:left>0.80922</td><td style=text-align:left></td><td style=text-align:left></td><td style=text-align:left></td></tr><tr><td style=text-align:left>IAU</td><td style=text-align:left>0.19586</td><td style=text-align:left></td><td style=text-align:left></td><td style=text-align:left></td></tr><tr><td style=text-align:left>IVZ</td><td style=text-align:left>-0.27263</td><td style=text-align:left></td><td style=text-align:left></td><td style=text-align:left></td></tr><tr><td style=text-align:left>QQQ</td><td style=text-align:left>0.41713</td><td style=text-align:left></td><td style=text-align:left></td><td style=text-align:left></td></tr><tr><td style=text-align:left>SPY</td><td style=text-align:left>0.18781</td><td style=text-align:left></td><td style=text-align:left></td><td style=text-align:left></td></tr><tr><td style=text-align:left>TLH</td><td style=text-align:left>-0.37304</td><td style=text-align:left></td><td style=text-align:left></td><td style=text-align:left></td></tr></tbody></table></li></ul><ul><li>波动率&lt;10%情况下，最大收益<table><thead><tr><th style=text-align:left>symbol</th><th style=text-align:left>比例</th><th style=text-align:left></th><th style=text-align:left>metrics</th><th style=text-align:left>performance</th></tr></thead><tbody><tr><td style=text-align:left>510300.SS</td><td style=text-align:left>0.0</td><td style=text-align:left></td><td style=text-align:left>Expected annual return</td><td style=text-align:left>9.5%</td></tr><tr><td style=text-align:left>510500.SS</td><td style=text-align:left>0.0</td><td style=text-align:left></td><td style=text-align:left>Annual volatility</td><td style=text-align:left>10.0%</td></tr><tr><td style=text-align:left>510880.SS</td><td style=text-align:left>0.03241</td><td style=text-align:left></td><td style=text-align:left>Sharpe Ratio</td><td style=text-align:left>0.75</td></tr><tr><td style=text-align:left>511010.SS</td><td style=text-align:left>0.35599</td><td style=text-align:left></td><td style=text-align:left></td><td style=text-align:left></td></tr><tr><td style=text-align:left>IAU</td><td style=text-align:left>0.1854</td><td style=text-align:left></td><td style=text-align:left></td><td style=text-align:left></td></tr><tr><td style=text-align:left>IVZ</td><td style=text-align:left>0.0</td><td style=text-align:left></td><td style=text-align:left></td><td style=text-align:left></td></tr><tr><td style=text-align:left>QQQ</td><td style=text-align:left>0.4262</td><td style=text-align:left></td><td style=text-align:left></td><td style=text-align:left></td></tr><tr><td style=text-align:left>SPY</td><td style=text-align:left>0.0</td><td style=text-align:left></td><td style=text-align:left></td><td style=text-align:left></td></tr><tr><td style=text-align:left>TLH</td><td style=text-align:left>0.0</td><td style=text-align:left></td><td style=text-align:left></td><td style=text-align:left></td></tr></tbody></table></li></ul><ul><li>最后，画出等高线</li></ul><figure><img src=../../ox-hugo/2023-12-20_10-52-42_screenshot_hu14648428173053639971.webp height=956 width=1280></figure><p>其实上面的问题都可以从这个图看出来。</p><h2 id=future-work>future work</h2><p>很可惜没有得到什么银弹结论。</p><p>希望有更深理解的人可以指导我一下。</p><p>其实应该加一些动态策略，比如周期性平衡什么的，先TODO着。</p></div></article></main><script src=https://utteranc.es/client.js repo=dvorak0/site issue-term=pathname theme=github-light crossorigin=anonymous async></script><script async src=https://www.yangzhenfei.com/js/mathjax-config.js></script><script type=text/javascript async src=https://cdnjs.cloudflare.com/ajax/libs/mathjax/3.2.2/es5/tex-chtml.min.js></script><aside><div><div><h3>LATEST POSTS</h3></div><div><ul><li><a href=../../posts/20241010100410-%E7%B2%BE%E5%8A%9B%E7%AE%A1%E7%90%86/>精力管理</a></li><li><a href=../../posts/20240720130238-low_latency_audio_measurement/>low latency audio: measurement</a></li><li><a href=../../posts/20240527151116-stoicism/>斯多葛主义(Stoicism)</a></li><li><a href=../../posts/20240131143759-avp%E4%BD%93%E9%AA%8C/>AVP体验</a></li><li><a href=../../posts/20240130180127-%E5%85%A8%E8%87%AA%E5%8A%A8%E9%A9%BE%E9%A9%B6%E7%9A%84%E9%87%8C%E7%A8%8B%E7%A2%91_%E5%90%97/>全自动驾驶的里程碑，吗？</a></li></ul></div></div></aside><footer><p>&copy; 2024 <a href=https://www.yangzhenfei.com/><b>Seeking Complexity</b></a>.
<a href=https://github.com/dvorak0><b>Github</b></a>.
<a href=https://twitter.com/dvorak0><b>Twitter</b></a>.</p></footer></body></html>