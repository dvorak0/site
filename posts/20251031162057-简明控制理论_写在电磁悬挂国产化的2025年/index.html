<!doctype html><html lang=zh-cn><head><meta charset=UTF-8><meta name=description content="self-reflections of Zhenfei Yang"><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=X-UA-Compatible content="IE=edge"><style type=text/css>body{font-family:monospace}</style><title>简明控制理论：写在电磁悬挂国产化的2025年</title><link rel=stylesheet href=../../css/style.css></head><body><header><script defer src=https://worker.yangzhenfei.com/a.js></script><script defer>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-JHXS14NDHV")</script><script defer src=https://cloud.umami.is/script.js data-website-id=045b5d99-a38d-410c-984f-5ac9e7cc7b76></script>========================<br>== <a href=https://www.yangzhenfei.com/>Seeking Complexity</a> ==<br>========================<div style=float:right></div><br><p><nav><a href=../../><b>Start</b></a>.
<a href=../../posts/><b>Posts</b></a>.
<a href=../../tags/><b>Tags</b></a>.
<a href=../../about/><b>About</b></a>.</nav></p></header><main><article><h1>简明控制理论：写在电磁悬挂国产化的2025年</h1><b><time>2025-10-31 16:20:00</time></b>
<a href=../../tags/public>PUBLIC</a><div><p>自己本来算是计算机的背景，感谢这个教育让我有了一种“离散”的世界观。</p><p>后面做机器人，接触到很多控制背景的朋友，简单了解下发现这是一个和计算机相爱相杀的学科。</p><p>互相重复且独立的发明了不少相似的概念。更重要地，展示了一种“连续”的世界观。</p><p>这里简单记录一下控制里面比较核心的美妙观点。起码回答，什么是传递函数。</p><h2 id=前置>前置</h2><p>不知道大家是不是和我一样都很久没用一些数学概念了，特别是连续函数里面的。</p><p>先提及几个概念：</p><ol><li><p>所有的连续函数都是若干周期函数的加和</p><p>所以我们先关注某特定周期的函数：\(x = e^{st} = e^{\sigma t}\sin(\omega t)\)。</p><p>其中 \(s\) 是复数\(s=\sigma +i \omega\)。</p></li><li><p>一类微分方程的通解 \(\frac{d^2 y}{d t^n} + a_1 \frac{d y}{d t} + a_2 y = 0\)</p><p>先考虑 \(y=e^{st}\)。</p><p>所以就得到 \(s^2 e^{st} +a_1 s e^{st} + a_2 e^{st} = 0\)，也就是 \(s^2 + a_1 s + a_2 = 0\)，关于 \(s\) 的二元一次方程。</p><p>如果这个方程的解是 \(s_1,s_2\) 两个。</p><p>那么 \(y = e^{s_1 t}\) 和 \(y = e^{s_2 t}\) 是原方程的通解。</p><p>其任意线性组合也是： \(y = \sum_{k=1}^{2} C_k e^{s_k t}\)。</p><p>这里举例子是2次，次数更高的话也是一样。</p><p>归结为解一个高次方程的根的问题。（忽然想起来一直想写一个和伽罗瓦理论有关的，以后再说吧）。</p><p>这个对应的高次方程，被叫作 <strong>特征方程</strong> 。</p></li></ol><h2 id=开始刻画问题>开始刻画问题</h2><p>从问题刻画开始，就是我陌生的领域了。</p><p>计算机用循环来刻画这个世界：
\[x_{t} = a x_{t-1} + b u_{t}\]</p><p>经典控制里面用微分方程来刻画这个世界：</p><p>\[\frac{d^3 y}{dt^3} + a_1 \frac{d^2 y}{dt^2} + a_2 \frac{dy}{dt} + a_3 y= b_0 \frac{d^3 u}{dt^3} + b_1 \frac{d^2 u}{dt^2} + b_2 \frac{du}{dt} + b_3 u\]</p><p>举个具体的例子，如果 \(y\) 是位置， \(u\) 是推力，那么 \(\frac{d^2y}{dt^2} = u\)，就是牛顿第二定律。</p><p>控制希望最终了解 \(y\) 的轨迹，是怎么被 \(u\) 驱动的。</p><p>那么我们来解方程。</p><h2 id=系统的内在属性-方程的通解>系统的内在属性，方程的通解</h2><p>我们先看看，如果没有 \(u\) ，\(y\) 自己会怎么变。</p><p>也就是 \(\frac{d^3 y}{dt^3} + a_1 \frac{d^2 y}{dt^2} + a_2 \frac{dy}{dt} + a_3 y = 0\) 的解。</p><p>上面讲过了，我们会得到：</p><ul><li>假设 \(y = e^{st}\)</li><li>得到特征方程 \(s^3 + a_1 s^2 + a_2 s + a_3 = 0\)</li><li>得到一群 \(y = e^{s_kt}\) ，及其线性组合 \(y = \sum_{k=1}^3 C_k e^{s_k t}\)</li></ul><p>这个就是这个系统的内在属性，比如我们谈到本体频率，一个桥，一个钟摆，在没有干预的时候，自己摇摆的频率。</p><p>注意这里每一个 \(s_k\) 都可能是复数，所以看几个例子：</p><figure><img src=../../ox-hugo/2025-10-31_20-07-16_screenshot_hu_f7578997d5ae9353.webp height=741 width=1280></figure><h2 id=方程对输入的反应-方程的特解>方程对输入的反应，方程的特解</h2><p>接下来，我们看下在 \(u\) 存在的情况下，\(y\) 的轨迹怎么变。</p><p>特别的，我们先考虑一个周期输入： \(u = e^{st}\)。如果我们最后能得到一个 \(y=Xu\) 的关系该有多好，直接获得变换矩阵 \(X\)。</p><p>我们试着假设 \(y = G(s) e^{st}\)，这里特别让 \(X = G(s)\) 是一个关于 \(s\) 的函数。</p><p>代入到一开始的方程里面，得到：</p><p>\begin{aligned}
\frac{du}{dt} &= s e^{st}, &\quad \frac{d^2u}{dt^2} &= s^2 e^{st}, &\quad \frac{d^3u}{dt^3} &= s^3 e^{st}, \\
\frac{dy}{dt} &= s G(s) e^{st}, &\quad \frac{d^2y}{dt^2} &= s^2 G(s) e^{st}, &\quad \frac{d^3y}{dt^3} &= s^3 G(s) e^{st}.
\end{aligned}</p><p>然后：\[(s^3 + a_1 s^2 + a_2 s + a_3)G(s)e^{st}= (b_0 s^3 + b_1 s^2 + b_2 s + b_3)e^{st}\]</p><p>也就是：\[G(s) = \frac{b_0 s^3 + b_1 s^2 + b_2 s + b_3}{s^3 + a_1 s^2 + a_2 s + a_3}\]</p><p>终于得到 <strong>传递函数</strong> 了。</p><p>到这里我们发现，传递函数是想想找到一种简单的映射，直接把输入对系统的影响，叠加到系统的输出上去 \(y = Xu\)。</p><p>再加上我们前面的通解，总体来说，面对输入信号 \(u = e^{st}\)，系统输出的轨迹是：</p><p>\[y = \sum_{k=1}^m C_k e^{s_k t} + G(s) e^{st}\]</p><h2 id=悬挂>悬挂</h2><p>为什么是这个标题。</p><p>之前我想过一个问题：什么决定了一个车平稳，有没有像云台一样稳定的车。</p><p>我作为不懂车的人，感觉这个问题是网上营销的重灾区，现在一个简单的倾向是认为 <strong>空气悬挂</strong> 是好悬挂。</p><p>这不符合我的直觉，因为我觉得空气和弹簧都是弹性器件，性质应该几乎相同，只能解决，或者硬或者软的问题，但是不能像云台一样有“控制力”。</p><p>关键应该在于阻尼。然后发现了 <strong>电磁悬挂</strong> 技术，通过电流，改变阻尼器中液体的黏性，来主动调整阻尼。</p><p>合理，这个说法说服我了。今年似乎是专利过期了，后面应该会有很多用这种悬挂的车吧。</p><p>对了，他们叫作 <strong>磁流变悬挂</strong> ，因为 <strong>电磁悬挂</strong> 已经在一些地方被CDC误用了，哈哈。（CDC是通过机械控制阻尼液的孔的大小来改变阻尼的一种方法）。</p><p>这几乎是一个spring–damper system：</p><p>\[m \ddot{y} + c(\dot{y} - \dot{u}) + k(y - u) = 0\]</p><p>其中：质量 \(m\)，弹簧刚度 \(k\)，阻尼系数 \(c\)，路面输入 \(u\)，车身高度输出 \(y\)。</p><p>得到传递函数： \[G(s)= \frac{c s + k}{m s^2 + c s + k}\]</p><p>如果 \(c\) 可以调整的话，这个系统应该会更有控制的可能性。</p><p>但是这里应该用什么控制率呢，今天我还不知道。</p></div></article></main><script src=https://utteranc.es/client.js repo=dvorak0/site issue-term=pathname theme=github-light crossorigin=anonymous async></script><script async src=https://www.yangzhenfei.com/js/mathjax-config.js></script><script type=text/javascript async src=https://cdnjs.cloudflare.com/ajax/libs/mathjax/3.2.2/es5/tex-chtml.min.js></script><aside><div><div><h3>LATEST POSTS</h3></div><div><ul><li><a href=../../posts/20251031162057-%E7%AE%80%E6%98%8E%E6%8E%A7%E5%88%B6%E7%90%86%E8%AE%BA_%E5%86%99%E5%9C%A8%E7%94%B5%E7%A3%81%E6%82%AC%E6%8C%82%E5%9B%BD%E4%BA%A7%E5%8C%96%E7%9A%842025%E5%B9%B4/>简明控制理论：写在电磁悬挂国产化的2025年</a></li><li><a href=../../posts/20251027161231-%E9%87%8D%E6%96%B0%E8%AE%A4%E8%AF%86chris_lattner/>重新认识Chris Lattner</a></li><li><a href=../../posts/20250903175454-%E9%B1%BC%E5%92%8C%E7%86%8A%E6%8E%8C%E6%88%91%E8%A6%81%E5%85%BC%E5%BE%97_ros2%E9%80%82%E5%90%88%E9%87%8F%E4%BA%A7%E5%90%97/>鱼和熊掌我要兼得：ROS2适合量产吗</a></li><li><a href=../../posts/20250718102851-oop_considered_harmful/>OOP considered harmful</a></li><li><a href=../../posts/20250605170140-%E4%BA%BA%E7%B1%BBcot%E5%85%B8%E8%8C%83_%E5%BC%A0%E7%A5%A5%E9%9B%A8%E7%9A%84line_of_research/>人类CoT典范，张祥雨的Line of Research</a></li></ul></div></div></aside><footer><p>&copy; 2025 <a href=https://www.yangzhenfei.com/><b>Seeking Complexity</b></a>.
<a href=https://github.com/dvorak0><b>Github</b></a>.
<a href=https://twitter.com/dvorak0><b>Twitter</b></a>.</p></footer></body></html>