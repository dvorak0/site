<!doctype html><html lang=zh-cn><head><meta charset=UTF-8><meta name=description content="self-reflections of Zhenfei Yang"><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=X-UA-Compatible content="IE=edge"><style type=text/css>body{font-family:monospace}</style><title>Music Theory: Building from the Scratch</title><link rel=stylesheet href=../../css/style.css></head><body><header><script defer src=https://worker.yangzhenfei.com/a.js></script><script defer>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-JHXS14NDHV")</script><script defer src=https://cloud.umami.is/script.js data-website-id=045b5d99-a38d-410c-984f-5ac9e7cc7b76></script>========================<br>== <a href=https://www.yangzhenfei.com/>Seeking Complexity</a> ==<br>========================<div style=float:right></div><br><p><nav><a href=../../><b>Start</b></a>.
<a href=../../posts/><b>Posts</b></a>.
<a href=../../tags/><b>Tags</b></a>.
<a href=../../about/><b>About</b></a>.</nav></p></header><main><article><h1>Music Theory: Building from the Scratch</h1><b><time>2025-05-16 10:17:00</time></b>
<a href=../../tags/public>PUBLIC</a><div><p>如何用比较数学和推理的方法去理解和掌握音乐。</p><p>说一个有争议的话题，类似中医和西医。不分高下地做一个对比，西医更像是演绎法，中医更像是归纳法。</p><p>就像是<a href=../../posts/20230609103642-first_principle/>how first principles thinking fails</a>里面提到的inductive v.s. deductive。</p><p>不是说归纳法不好，而是演绎法可能更适合我这样的天赋不佳的人去理解。你跟我说，“感觉一下”，我太难理解了。</p><p>Building from the Scratch是模仿Linux From Scratch (LFS)。</p><h2 id=第一章-从频率说起>第一章 从频率说起</h2><h3 id=声音>声音</h3><p>众所周知，声音是波。波有两个属性：频率 x 振幅。频率决定我们听起来声音的“高低”，振幅决定声音的“大小”。</p><p>声音是波，而不是粒子 :)。</p><p>所以声音存在“共振”现象。</p><p>也就是说，在自然界中，如果一个声音的频率是440Hz，往往440Hz的整数倍声音也会同时出现。比如880Hz（第2谐波），1320hz（第3谐波）等等。</p><p>为什么同样不跑调的人，有的人唱起来好听，有的人唱起来不好听。</p><p>就是因为每个人的谐波特性不同。</p><p>如果完全没有谐波，好不好听呢。</p><p>在电子电路出现之前，是很难产生单一频率的波的。但是现在我们可以用电路来实现非常单一的波，这种工具被称为合成器。构成了电子乐的基础。</p><h3 id=音乐中的牛顿定律>音乐中的牛顿定律</h3><p>上面我们说完了单一频率的波，接下来我们说如果多个频率连续出现，什么时候我们会觉得好听，什么时候会觉得难听呢。（这里的好听难听就无法形式化了，凭“感觉”）。</p><p>结论：</p><p>频率构成简单整数比的声音，放在一起听会比较好听。</p><p>比如：</p><ol><li>上面提到，我们在发出440Hz的时候，880Hz的声音也同时存在，构成1:2的频率比，属于简单整数比。所以一个持续的单一音高，不会那么“难听”。</li><li>和弦是好听的，和弦是什么呢。和弦就是多个构成简单整数比的声音同时出现。比如我们最常见的C大三和弦，就是由频率比例是4:5:6的声音构成的。
在这里并不需要理解什么是C大三和弦。后面会再介绍。</li></ol><p>到这里，我们提到“好听”很多次，我们的好听是基于我们身体机能的反应（可以再深究一下，但是不是今天）。</p><p>这里也应该形式化的表达一下人对声音的测量特性了。</p><ol><li>（大部分）人无法掌握的机能：听声音，就说出他的频率。</li><li>（所有人）人可以听出来两个声音之间的频率比例。
我们把两个音的比例，给一个名字叫作 <strong>音程</strong> ，声音之间的路程。最简单的音程就是1:2。</li><li>所以人的耳朵工作在Log尺度下。</li></ol><p>下面，我们如果想构成一段声音的序列，我们该怎么选择频率呢。</p><p>比如我们先无脑选择440Hz（这个440Hz完全是人为定义，历史惯性，完全可以改成别的），那么我们可以先想到880Hz，这个没问题，听起来是“和谐”的（后面我们会更多用和谐来指代好听）。</p><p>然后我可以选择440Hz的1/2，1/3，1/4&mldr;1/13，每个音给一个键，用合成器来开始演奏了。</p><p>这样可以吗，其实是可以的，但是历史的车轮走到今天，我们现存的音乐体系里面用的是1234567，七个音。也就是说，在1:2的整个音程[440,880]里面，切分出来7个音。</p><h3 id=为什么是7个音>为什么是7个音</h3><p>我们进入第一个真正有意思的环节了。</p><p>为什么是7个音呢。历史上是怎么发生的?</p><p>首先，我们看看哪些整数比是好用的，1:2两倍频率，没有问题。2:3也是很整的。</p><h4 id=2-3是如此之好听-那么让我们重复它>2:3是如此之好听，那么让我们重复它</h4><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span>f <span style=color:#f92672>=</span> <span style=color:#ae81ff>440</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>for</span> i <span style=color:#f92672>in</span> range(<span style=color:#ae81ff>13</span>):
</span></span><span style=display:flex><span>    print(i,f)
</span></span><span style=display:flex><span>    f <span style=color:#f92672>=</span> f <span style=color:#f92672>*</span> <span style=color:#ae81ff>3</span><span style=color:#f92672>/</span><span style=color:#ae81ff>2</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> f <span style=color:#f92672>&gt;</span> <span style=color:#ae81ff>880</span>: f<span style=color:#f92672>=</span>f<span style=color:#f92672>/</span><span style=color:#ae81ff>2.0</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>0</span> <span style=color:#ae81ff>440</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>1</span> <span style=color:#ae81ff>660.0</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>2</span> <span style=color:#ae81ff>495.0</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>3</span> <span style=color:#ae81ff>742.5</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>4</span> <span style=color:#ae81ff>556.875</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>5</span> <span style=color:#ae81ff>835.3125</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>6</span> <span style=color:#ae81ff>626.484375</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>7</span> <span style=color:#ae81ff>469.86328125</span>
</span></span></code></pre></div><p>一直循环到第7个，我们似乎又回到了原点，469和440很接近了，那么我们停下来吧。</p><ul><li><p>一个小小的修复</p><p>在上面的过程之后，我们得到了8个音符（下图中灰色+红色，重色是上面迭代中的(7,469)。
但是，我们遗憾地发现3:4这个良好的整数比竟然没有用上（下图中蓝色）。</p><p>所以，决定，把红色换成蓝色。最终得到7个音符。</p><figure><img src=../../ox-hugo/2025-05-19_20-45-07_screenshot_hu_37ffa5b258b76350.webp height=320 width=1280></figure><p>这种方法又被称作<a href=https://zh.wikipedia.org/zh-hant/%E4%BA%94%E5%BA%A6%E7%9B%B8%E7%94%9F%E5%BE%8B>五度相生律</a>，据说是毕达哥拉斯学派发明的。</p></li></ul><h3 id=形式化的开始-巴赫十二平均律>形式化的开始，巴赫十二平均律</h3><p>在上面的五度相生律之后，要过了很长很长一段时间，人们才真正学会log/exp算符。（巴赫会不会啊，不知道）。</p><p>所以被大佬巴赫，重新发明了十二平均律。</p><p>上面的结果，如果我们用现在我们掌握的exp来操作，并且去增加划分：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span>t<span style=color:#f92672>=</span><span style=color:#ae81ff>12</span>
</span></span><span style=display:flex><span>octaves <span style=color:#f92672>=</span> [<span style=color:#ae81ff>440</span><span style=color:#f92672>*</span>(<span style=color:#ae81ff>2</span><span style=color:#f92672>**</span>i) <span style=color:#66d9ef>for</span> i <span style=color:#f92672>in</span> range(<span style=color:#ae81ff>2</span>)]
</span></span><span style=display:flex><span>fifth <span style=color:#f92672>=</span> [octaves[i] <span style=color:#f92672>*</span> <span style=color:#ae81ff>3</span><span style=color:#f92672>/</span><span style=color:#ae81ff>2</span> <span style=color:#66d9ef>for</span> i <span style=color:#f92672>in</span> range(<span style=color:#ae81ff>1</span>)]
</span></span><span style=display:flex><span>fourths <span style=color:#f92672>=</span> [octaves[i] <span style=color:#f92672>*</span> <span style=color:#ae81ff>4</span><span style=color:#f92672>/</span><span style=color:#ae81ff>3</span> <span style=color:#66d9ef>for</span> i <span style=color:#f92672>in</span> range(<span style=color:#ae81ff>1</span>)]
</span></span><span style=display:flex><span>new_notes <span style=color:#f92672>=</span> [octaves[<span style=color:#ae81ff>0</span>] <span style=color:#f92672>*</span> (<span style=color:#ae81ff>2</span><span style=color:#f92672>**</span>(float(i)<span style=color:#f92672>/</span>float(t))) <span style=color:#66d9ef>for</span> i <span style=color:#f92672>in</span> range(<span style=color:#ae81ff>1</span>, t<span style=color:#f92672>+</span><span style=color:#ae81ff>1</span>)]
</span></span><span style=display:flex><span>plot(<span style=color:#e6db74>f</span><span style=color:#e6db74>&#34;</span><span style=color:#e6db74>{</span>t<span style=color:#e6db74>}</span><span style=color:#e6db74> divisions (notes)&#34;</span>, [(octaves, <span style=color:#e6db74>&#39;k&#39;</span>, <span style=color:#e6db74>&#34;octaves&#34;</span>), (fifth, <span style=color:#e6db74>&#39;r&#39;</span>, <span style=color:#e6db74>&#34;fifths&#34;</span>),(fourths,<span style=color:#e6db74>&#39;b&#39;</span>, <span style=color:#e6db74>&#34;fourths&#34;</span>),(new_notes,<span style=color:#e6db74>&#39;g&#39;</span>, <span style=color:#e6db74>&#34;new notes&#34;</span>)], <span style=color:#e6db74>&#39;log&#39;</span>)
</span></span></code></pre></div><figure><img src=../../ox-hugo/2025-05-19_20-45-27_screenshot_hu_b6ca9b79670a8986.webp height=668 width=1280></figure><p>我们就直接得到了12个划分，并且：</p><ol><li>充分利用了1:2 2:3 3:4这三个良好的整数比。</li><li>尊重了传统，上面的7个音符也都被覆盖了，历史上的曲子不用重写了。</li></ol><p>这里，我们有了新的观察，原来1-2之间和3-4之间，不一同样的“距离”。</p><ul><li>3-4和7-1之间距离比较小，在十二划分里面，这两个之间的距离是一个单位，被叫作一个 <strong>半音</strong> 。</li><li>其他音之间的距离比较大，是两个单位，被叫作一个 <strong>全音</strong> 。</li></ul><p>到了这里，终于有一个比较“良好”的数学表示了。</p><p>我想起来小时后音乐课的时候，有一种题算是简谱的完形填空，给你一个旋律，盖住其中一个音符来猜答案，当时我很想用类似等差数列之类的东西去找答案。</p><p>现在看来，当时猜的成绩如此之差也可以理解了。音阶竟然不是连续的。</p><p>用流行的话说，12平均律给出了一个最基础的latent representation。</p><h3 id=数学上的不严谨性>数学上的不严谨性</h3><p>上面两种方法，五度相生律和十二平均律找到的音符，从数学上不是完全相等的。</p><p>十二平均律找到的都是无理数，原本的五度相生律找到的都是有理数。</p><p>这是一个细节。</p><p>十二平均律确实更加整齐，也有很多优点，但是五度相生律更接近最基础的整数比定理。</p><p>所以严格来说，十二平均律是方便，但是不够好听或者说和谐的那一个。</p><p>除了这两个之外，还有一些其他的律。甚至这也算一个专门的领域吧。</p><h2 id=第二章-旋律和和弦的关系>第二章 旋律和和弦的关系</h2><h3 id=和弦出现了>和弦出现了</h3><p>这样，和弦就出现了，几个音放在一起听，比较和谐，他们就算是一个和弦。</p><h4 id=二-个音的-和弦>二（个音的）和弦</h4><p>比如1-5，如果大家还记得话，他们是2:3的关系，听起来很好，同理2-6也听起来很好。而且1-5和2-6听起来会有点像。</p><h4 id=三-个音的-和弦>三（个音的）和弦</h4><p>再多一个音的话，1-3-5的比例是4:5:6，这个就有点高级了，它是由1-3的4:5和1-5的2:3组成的。</p><p>另外一种理解是，它是由1-3这个音程和2-5这个音程组成的。根据十二平均律，1-3是4个半音的音程，3-5是3个半音的音程。 <strong>先走4步，再走3步。</strong></p><p>继续往下平移呢，2-4-6，他是由2-4和4-6组成的，其中2-4是3个半音，4-6是4个半音。 <strong>先走3步，再走两步。</strong></p><p>和弦就是上面最基础的representation之上一点，更常用的一种representation。</p><p>而和弦之中，三和弦占据了主导地位。</p><p>三和弦中，1-3-5（4步+3步）和2-4-6（3步+4步）被人们听出来最容易区分，他们的性格（从听感来说）最容易区分。</p><p>所以人们给了他们一个非常朴素的名字，4+3是大（三）和弦，3+4是小（三）和弦。</p><h3 id=旋律的基础-离家出走-归来和解>旋律的基础：离家出走->归来和解</h3><p>在<a href=../../posts/20240527151116-stoicism/>斯多葛主义(Stoicism)</a>中提到，快乐无法脱离痛苦而存在。这个说法在旋律中隐隐地体现出来。</p><p>旋律，可以被认为，从完美的和谐出发，走出一些不和谐，最终回到和谐的过程。</p><p>是不是有点像自虐狂。</p><p>或者像走钢丝绳，微微失去平衡，再回来。这种过程，构成了旋律。</p><p>可以把音符想象成一个序列，每次产生一个新的音符的时候，我们要考虑两个因素：</p><ul><li>希望下一个音符和之前的音符连续出现比较和谐，贴近和弦</li><li>是不是该回家了，回到最初的音。不妨假设，我们是从1出发，那么最终我们都是要回到1的。</li></ul><p>这就是旋律，从家出发，最终回到家，这期间的探险经历，就是旋律。有的旋律明亮昂扬，有的旋律忧郁灰暗，只是在每一步的选择不同。</p><h2 id=第三章-旋律的色彩>第三章 旋律的色彩</h2><h4 id=十二平均律的预测性>十二平均律的预测性</h4><p>历史发展起来，发现了一个物理规律，这个规律一方面可以解释过去的现象，更重要的，应该可以预测未来。</p><p>现在我们有了：12个划分，12个音符。我们先用下标来指代他们。我们目前最常用的音符，还是用五度相生律做出来的，也就是[0, 2, 4, 5, 7, 9, 11, 12/0]。</p><p>我们也慢慢意识到，声音的一切都是围绕相对的音程概念的，绝对值不是那么重要。</p><p>所以我们有两个猜想：</p><ol><li>能不能平移。
比如[2, 4, 6, 7, 9, 11, 13, 14] 。答案是可以的。而且对大多数人来说，在不做A/B对比的情况下，两种方法演奏的歌听起来是一样的，
在上面的[0,2..12]和[2,4..14]里面，不变的是音和音之间的关系，都是全全半全全全半。</li><li>能不能换家。
比如[9, 11, 0, 2, 4, 5, 7, 9]。答案也是可以的，但是这种替换，听起来就不一样了。这次变换之后，音和音之间的关系变成了，全半全全半全全。</li></ol><p>一种变换不影响听感，这个好理解。一种变换影响听感，也好理解。</p><p>一切都是因为音程的组合不同。</p><p>第一种变换，更多的作用在于更改旋律的高低，去做乐器之前的配合。</p><p>其实主要是配合最不稳定的一个乐器，就是人的嗓子。</p><p>人的嗓子的一致性很差，不同的人能唱的高低音差别很大，特别是男女之间的差异也比较大。</p><p>第二种变换更具延伸性。如果我们不想改变音符，是不是可以多做一些变换：</p><ul><li>12345671</li><li>23456712</li><li>34567123</li><li>45671234</li><li>56712345</li><li>67123456</li><li>71234567</li></ul><p>到这里，我有点不可思议了，原来怎么搞都行啊。</p><p>确实是怎么搞都行，但是有的好听，有的不好听。或者说有的更大众，更多人听起来舒服，有的更小众，只有乐于挑战的人愿意去尝试。</p><h4 id=大调小调>大调小调</h4><p>在7个变换中，最常用的，也就是说在没有理论指导的情况下，大家试错出来的，最不难听的。是第一个和第六个。</p><p>第一个被叫作， <strong>大调音阶</strong> 。第六个被叫作， <strong>小调音阶</strong> 。</p><p>人们用一个调式里面的第一个三和弦来简化称呼这一个调式。</p><p>大调音阶的第一个三和弦是1-3-5，上面说过，这是个大三和弦。</p><p>小调音阶的第一个三和弦是6-1-3，上面说过，这是个小三和弦。</p><h4 id=中古调式>中古调式</h4><p>其他的也都有名字，而且个顶个的名字非常高大上。</p><table><thead><tr><th></th><th></th><th></th><th></th></tr></thead><tbody><tr><td>1234567</td><td>Ionian Mode</td><td>伊奥尼亚调式</td><td>大调音阶</td></tr><tr><td>2345671</td><td>Dorian Mode</td><td>多利亚调式</td><td></td></tr><tr><td>3456712</td><td>Phrygian Mode</td><td>弗利几亚调式</td><td></td></tr><tr><td>4567123</td><td>Lydian Mode</td><td>利底亚调式</td><td></td></tr><tr><td>5671234</td><td>Mixolydian Mode</td><td>混合利底亚调式</td><td></td></tr><tr><td>6712345</td><td>Aeolian Mode</td><td>艾奥利亚调式</td><td>小调音阶</td></tr><tr><td>7123456</td><td>Locrian Mode</td><td>洛克利亚调式</td><td></td></tr></tbody></table><p>中古调式的中古，意思是中世纪。中古调式又叫作教堂调式，意思是中世纪的罗马教堂发明的。</p><p>教堂为了影响大家，发明了很多东西。</p><p>曾经去过一些欧洲的著名教堂，进去之后，看着那些高高的穹顶，看着精美的雕像和壁画，听着教堂音乐以及被刻意设计的房间混响。
有一种我也想加入的感觉，对人的影响力真的很强。</p><p>建筑和音乐很多的起源就是宗教的传播需求了。</p><p>中古调式有点太复杂了。</p><p>但是我们平常听的音乐应该99%都是大调或者小调。</p><p>其他的调式就好像钢丝绳上的高难度动作，不容易玩好，玩好了也难免曲高和寡。</p><h3 id=两个应用>两个应用</h3><h4 id=中国调式-宫-商-角-徵-羽>中国调式：宫、商、角、徵、羽</h4><p>中国的宫商角徵羽算是什么调式呢。首先他音符不够啊，他只有5个。</p><p>实际上他是123561。就是去掉了4和7。</p><p>这两个被去掉，一点也不怨，他们都太不独立了，4和3只有一个半音，7和1之间也只有一个半音。</p><p>去掉之后，剩下5个音符。从这5个音符里面任意选择音去构成二和弦或者三和弦，概率上来说，更容易和谐了。</p><h4 id=摇滚五声音阶>摇滚五声音阶</h4><p>这个也是经常被提到的一个名字。</p><p>玩摇滚的为了简化技巧，强化情绪，也去掉了两个音符。</p><p>他们选择的是61235。基于同样的原因，我们去掉了4和7。</p><p>总结来说，中国调式是5音符的大调，摇滚五声音阶是5音符的小调。</p><p>如果手边有什么乐器可以弹一弹的话，会发现这几个音符，随便弹，其实都不算难听。这不就是即兴了嘛。</p><h2 id=结尾>结尾</h2><p>写这些内容，诚惶诚恐，因为我自己是一个半吊子。</p><p>但是还是被<a href=../../posts/20220510210940-write_it_down/>write_it_down</a>和<a href>let&rsquo;s_have_a_talk</a>鼓励，写一些，帮助自己厘清思路，也看看能不能结交新的朋友讨论讨论。</p><blockquote><p>好读书，不求甚解；每有会意，便欣然忘食。</p></blockquote></div></article></main><script src=https://utteranc.es/client.js repo=dvorak0/site issue-term=pathname theme=github-light crossorigin=anonymous async></script><script async src=https://www.yangzhenfei.com/js/mathjax-config.js></script><script type=text/javascript async src=https://cdnjs.cloudflare.com/ajax/libs/mathjax/3.2.2/es5/tex-chtml.min.js></script><aside><div><div><h3>LATEST POSTS</h3></div><div><ul><li><a href=../../posts/20250605170140-%E4%BA%BA%E7%B1%BBcot%E5%85%B8%E8%8C%83_%E5%BC%A0%E7%A5%A5%E9%9B%A8%E7%9A%84line_of_research/>人类CoT典范，张祥雨的Line of Research</a></li><li><a href=../../posts/20250516101712-building_music_theory_from_the_scratch/>Music Theory: Building from the Scratch</a></li><li><a href=../../posts/20250508121432-%E6%A8%A1%E4%BB%BF%E5%8F%AF%E4%BB%A5%E4%BA%A7%E7%94%9F%E6%99%BA%E8%83%BD%E5%90%97/>E2E Self-Driving: 模仿可以产生智能吗？</a></li><li><a href=../../posts/20250506141744-%E6%9D%8E%E5%85%89%E8%80%80%E8%A7%82%E5%A4%A9%E4%B8%8B/>《李光耀观天下》</a></li><li><a href=../../posts/20250506140144-%E8%A7%A3%E6%9E%84%E7%8E%B0%E4%BB%A3%E5%8C%96_%E6%B8%A9%E9%93%81%E5%86%9B%E6%BC%94%E8%AE%B2%E5%BD%95/>《解构现代化：温铁军演讲录》</a></li></ul></div></div></aside><footer><p>&copy; 2025 <a href=https://www.yangzhenfei.com/><b>Seeking Complexity</b></a>.
<a href=https://github.com/dvorak0><b>Github</b></a>.
<a href=https://twitter.com/dvorak0><b>Twitter</b></a>.</p></footer></body></html>